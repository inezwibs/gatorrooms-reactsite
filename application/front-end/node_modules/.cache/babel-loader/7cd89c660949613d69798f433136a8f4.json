{"ast":null,"code":"import _defineProperty from \"/home/inez/Documents/csc648-sp19-team09/application/front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _objectSpread from \"/home/inez/Documents/csc648-sp19-team09/application/front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"/home/inez/Documents/csc648-sp19-team09/application/front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/inez/Documents/csc648-sp19-team09/application/front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/inez/Documents/csc648-sp19-team09/application/front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/inez/Documents/csc648-sp19-team09/application/front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"/home/inez/Documents/csc648-sp19-team09/application/front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"/home/inez/Documents/csc648-sp19-team09/application/front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/inez/Documents/csc648-sp19-team09/application/front-end/src/modules/listing/new-listing.js\";\nimport React, { Component } from 'react';\nimport { TextField, FormGroup, FormControl, Paper, withStyles, Typography } from '@material-ui/core';\nimport styles from './styles/new-listing';\nimport Button from '@material-ui/core/Button';\nimport { Redirect } from 'react-router-dom'; //use axios for posting \n\nimport { createPosting } from '../../api/listings.actions';\nimport OutlinedInput from '@material-ui/core/OutlinedInput';\nimport Select from '@material-ui/core/Select';\nimport InputLabel from '@material-ui/core/InputLabel'; //image preview stuff\n\nimport Card from '@material-ui/core/Card';\nimport CardMedia from '@material-ui/core/CardMedia';\nimport CardActions from '@material-ui/core/CardActions';\nimport CardContent from '@material-ui/core/CardContent';\nimport IconButton from '@material-ui/core/IconButton';\nimport DeleteForeverSharpIcon from '@material-ui/icons/DeleteForeverSharp';\nimport GridListTileBar from '@material-ui/core/GridListTileBar';\nimport GridList from '@material-ui/core/GridList';\nimport GridListTile from '@material-ui/core/GridListTile'; // https://stackoverflow.com/questions/36280818/how-to-convert-file-to-base64-in-javascript\n\nvar NewListing =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(NewListing, _Component);\n\n  function NewListing(props) {\n    var _this;\n\n    _classCallCheck(this, NewListing);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(NewListing).call(this, props));\n\n    _this.addFile = function (event) {\n      var form = _this.state.form;\n      var files = Array.from(event.target.files);\n\n      for (var i = 0; i < files.length; i++) {\n        _this.state.imagesPreviews.push(URL.createObjectURL(files[i]));\n\n        _this.getBase64(files[i]).then(function (data) {\n          var encoded = data.replace(/^data:(.*;base64,)?/, '');\n          form.images.push(encoded);\n        });\n      }\n\n      _this.setState({\n        form: form\n      });\n    };\n\n    _this.formValidate = function (name, value) {\n      if (['price', 'zipcode'].includes(name.toLowerCase())) {\n        if (/[a-zA-Z]/.test(value)) {\n          alert(\"must only contain digits\"); //undo the change\n\n          _this.setState({\n            form: _objectSpread({}, _this.state.form, _defineProperty({}, name, value.slice(0, -1)))\n          });\n        }\n      }\n    };\n\n    _this.handleFormChange = function (name) {\n      return function (_ref) {\n        var value = _ref.target.value;\n\n        _this.setState({\n          form: _objectSpread({}, _this.state.form, _defineProperty({}, name, value))\n        });\n\n        _this.formValidate(name, value);\n      };\n    };\n\n    _this.handleAddressChange = function (name) {\n      return function (_ref2) {\n        var value = _ref2.target.value;\n\n        _this.formValidate(name, value);\n\n        var form = _this.state.form;\n        form.address[name] = value;\n\n        _this.setState({\n          form: form\n        });\n      };\n    };\n\n    _this.getBase64 = function (file) {\n      return new Promise(function (resolve, reject) {\n        var reader = new FileReader();\n        reader.readAsDataURL(file);\n\n        reader.onload = function () {\n          return resolve(reader.result);\n        };\n\n        reader.onerror = function (error) {\n          return reject(error);\n        };\n      });\n    };\n\n    _this.onSubmitClick = function () {\n      var form = _this.state.form;\n\n      if (Object.keys(form).length != 8) {\n        alert('you must fill out all form fields');\n      } else {\n        createPosting(form, function () {\n          //if response is good then redirect-render new page\n          _this.setState({\n            submitSuccess: true\n          });\n        });\n      }\n    };\n\n    _this.onResetClick = function () {\n      _this.setState({\n        form: {\n          address: {},\n          images: []\n        },\n        imagesPreviews: []\n      });\n    };\n\n    _this.removeImage = function (imageIndex) {\n      _this.state.imagesPreviews.splice(imageIndex, 1);\n\n      console.log(_this.state.imagesPreviews);\n\n      _this.forceUpdate();\n    };\n\n    _this.state = {\n      form: {\n        images: [],\n        address: {}\n      },\n      imagesPreviews: [],\n      submitSuccess: false\n    };\n    _this.addFile = _this.addFile.bind(_assertThisInitialized(_this));\n    _this.onResetClick = _this.onResetClick.bind(_assertThisInitialized(_this));\n    _this.onSubmitClick = _this.onSubmitClick.bind(_assertThisInitialized(_this));\n    _this.handleFormChange = _this.handleFormChange.bind(_assertThisInitialized(_this));\n    _this.handleAddressChange = _this.handleAddressChange.bind(_assertThisInitialized(_this));\n    _this.formValidate = _this.formValidate.bind(_assertThisInitialized(_this));\n    _this.removeImage = _this.removeImage.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(NewListing, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$state = this.state,\n          form = _this$state.form,\n          submitSuccess = _this$state.submitSuccess;\n      var classes = this.props.classes;\n      var previews = this.state.imagesPreviews.map(function (image, imageIndex) {\n        var index = parseInt(imageIndex);\n        return React.createElement(GridListTile, {\n          key: \"preview image \" + index,\n          cols: 1,\n          style: {\n            height: 'auto'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 152\n          },\n          __self: this\n        }, React.createElement(Card, {\n          className: classes.card,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 157\n          },\n          __self: this\n        }, React.createElement(CardMedia, {\n          className: classes.media,\n          image: image,\n          alt: \"previewImage\" + index,\n          title: \"Uploaded Image \" + index,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 158\n          },\n          __self: this\n        })), React.createElement(GridListTileBar, {\n          actionIcon: React.createElement(IconButton, {\n            className: classes.deletePreview,\n            onClick: function onClick() {\n              return _this2.removeImage(imageIndex);\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 168\n            },\n            __self: this\n          }, React.createElement(DeleteForeverSharpIcon, {\n            className: classes.icon,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 169\n            },\n            __self: this\n          })),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 166\n          },\n          __self: this\n        }));\n      });\n\n      if (submitSuccess) {\n        return React.createElement(Redirect, {\n          to: '/profile/listings',\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 179\n          },\n          __self: this\n        });\n      }\n\n      return React.createElement(Paper, {\n        className: classes.root,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 183\n        },\n        __self: this\n      }, React.createElement(Typography, {\n        variant: \"h5\",\n        component: \"h3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 184\n        },\n        __self: this\n      }, \"Create New Listing\"), React.createElement(FormGroup, {\n        className: classes.formGroup,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 191\n        },\n        __self: this\n      }, React.createElement(FormControl, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192\n        },\n        __self: this\n      }, React.createElement(TextField, {\n        label: \"Title\",\n        value: form.title,\n        onChange: this.handleFormChange('title'),\n        margin: \"normal\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 193\n        },\n        __self: this\n      })), React.createElement(FormControl, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 202\n        },\n        __self: this\n      }, React.createElement(TextField, {\n        label: \"Price\",\n        value: form.price,\n        onChange: this.handleFormChange('price'),\n        margin: \"normal\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 203\n        },\n        __self: this\n      })), React.createElement(FormControl, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 211\n        },\n        __self: this\n      }, React.createElement(TextField, {\n        label: \"Address\",\n        value: form.address.line1,\n        onChange: this.handleAddressChange('line1'),\n        margin: \"normal\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 212\n        },\n        __self: this\n      })), React.createElement(FormControl, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 221\n        },\n        __self: this\n      }, React.createElement(TextField, {\n        label: \"City\",\n        value: form.address.city,\n        onChange: this.handleAddressChange('city'),\n        margin: \"normal\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 222\n        },\n        __self: this\n      })), React.createElement(FormControl, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 231\n        },\n        __self: this\n      }, React.createElement(TextField, {\n        label: \"State\",\n        value: form.address.state,\n        onChange: this.handleAddressChange('state'),\n        margin: \"normal\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 232\n        },\n        __self: this\n      })), React.createElement(FormControl, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 242\n        },\n        __self: this\n      }, React.createElement(TextField, {\n        label: \"Zip\",\n        value: form.address.zipCode,\n        onChange: this.handleAddressChange('zipCode'),\n        margin: \"normal\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 243\n        },\n        __self: this\n      })), React.createElement(FormControl, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 250\n        },\n        __self: this\n      }, React.createElement(TextField, {\n        multiline: true,\n        rows: \"6\",\n        label: \"Description\",\n        value: form.description,\n        onChange: this.handleFormChange('description'),\n        margin: \"normal\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 251\n        },\n        __self: this\n      })), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 262\n        },\n        __self: this\n      }), React.createElement(FormControl, {\n        variant: \"outlined\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 263\n        },\n        __self: this\n      }, React.createElement(InputLabel, {\n        ref: function ref(_ref3) {\n          _this2.InputLabelRef = _ref3;\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 264\n        },\n        __self: this\n      }, \"Housing Type\"), React.createElement(Select, {\n        native: true,\n        value: form.housingType,\n        onChange: this.handleFormChange('housingType'),\n        input: React.createElement(OutlinedInput, {\n          name: \"Housing Type\",\n          id: \"outlined-age-native-simple\",\n          labelWidth: 'Housing Type'.length,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 276\n          },\n          __self: this\n        }),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 271\n        },\n        __self: this\n      }, React.createElement(\"option\", {\n        value: \"\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 283\n        },\n        __self: this\n      }), React.createElement(\"option\", {\n        value: \"Apartment\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 284\n        },\n        __self: this\n      }, \"Apartment\"), React.createElement(\"option\", {\n        value: \"House\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 285\n        },\n        __self: this\n      }, \"House\"), React.createElement(\"option\", {\n        value: \"Room\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 286\n        },\n        __self: this\n      }, \"Room\"), React.createElement(\"option\", {\n        value: \"Studio\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 287\n        },\n        __self: this\n      }, \"Studio\"), React.createElement(\"option\", {\n        value: \"Townhome\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 288\n        },\n        __self: this\n      }, \"Townhome\"))), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 294\n        },\n        __self: this\n      }), React.createElement(FormControl, {\n        variant: \"outlined\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 295\n        },\n        __self: this\n      }, React.createElement(InputLabel, {\n        ref: function ref(_ref4) {\n          _this2.InputLabelRef = _ref4;\n        },\n        htmlFor: \"outlined-age-native-simple\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 296\n        },\n        __self: this\n      }, \"Bed rooms\"), React.createElement(Select, {\n        native: true,\n        value: form.bedrooms,\n        onChange: this.handleFormChange('bedrooms'),\n        input: React.createElement(OutlinedInput, {\n          name: \"bedrooms\",\n          id: \"outlined-age-native-simple\",\n          labelWidth: 'bedrooms'.length,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 309\n          },\n          __self: this\n        }),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 304\n        },\n        __self: this\n      }, React.createElement(\"option\", {\n        value: \"\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 316\n        },\n        __self: this\n      }), React.createElement(\"option\", {\n        value: 1,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 317\n        },\n        __self: this\n      }, \"1\"), React.createElement(\"option\", {\n        value: 2,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 318\n        },\n        __self: this\n      }, \"2\"), React.createElement(\"option\", {\n        value: 3,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 319\n        },\n        __self: this\n      }, \"3\"))), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 323\n        },\n        __self: this\n      }), React.createElement(FormControl, {\n        variant: \"outlined\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 324\n        },\n        __self: this\n      }, React.createElement(InputLabel, {\n        ref: function ref(_ref5) {\n          _this2.InputLabelRef = _ref5;\n        },\n        htmlFor: \"outlined-age-native-simple\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 325\n        },\n        __self: this\n      }, \"Bathrooms\"), React.createElement(Select, {\n        native: true,\n        value: form.bathrooms,\n        onChange: this.handleFormChange('bathrooms'),\n        input: React.createElement(OutlinedInput, {\n          name: \"bathrooms\",\n          id: \"outlined-age-native-simple\",\n          labelWidth: 'bathrooms'.length,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 338\n          },\n          __self: this\n        }),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 333\n        },\n        __self: this\n      }, React.createElement(\"option\", {\n        value: \"\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 345\n        },\n        __self: this\n      }), React.createElement(\"option\", {\n        value: 1,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 346\n        },\n        __self: this\n      }, \"1\"), React.createElement(\"option\", {\n        value: 2,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 347\n        },\n        __self: this\n      }, \"2\"), React.createElement(\"option\", {\n        value: 3,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 348\n        },\n        __self: this\n      }, \"3\"))), React.createElement(FormControl, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 354\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        multiple: true,\n        accept: \"image/png, image/jpeg\",\n        type: \"file\",\n        onChange: this.addFile,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 355\n        },\n        __self: this\n      })), React.createElement(GridList, {\n        cellHeight: 160,\n        className: classes.gridList,\n        cols: 3,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 363\n        },\n        __self: this\n      }, previews), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 368\n        },\n        __self: this\n      }, React.createElement(Button, {\n        variant: \"contained\",\n        size: \"small\",\n        color: \"primary\",\n        type: \"reset\",\n        onClick: this.onResetClick,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 369\n        },\n        __self: this\n      }, \"RESET\"), React.createElement(Button, {\n        variant: \"contained\",\n        size: \"small\",\n        color: \"primary\",\n        onClick: this.onSubmitClick,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 378\n        },\n        __self: this\n      }, \"SUBMIT\"))));\n    }\n  }]);\n\n  return NewListing;\n}(Component);\n\nexport default withStyles(styles, {\n  withTheme: true\n})(NewListing);","map":{"version":3,"sources":["/home/inez/Documents/csc648-sp19-team09/application/front-end/src/modules/listing/new-listing.js"],"names":["React","Component","TextField","FormGroup","FormControl","Paper","withStyles","Typography","styles","Button","Redirect","createPosting","OutlinedInput","Select","InputLabel","Card","CardMedia","CardActions","CardContent","IconButton","DeleteForeverSharpIcon","GridListTileBar","GridList","GridListTile","NewListing","props","addFile","event","form","state","files","Array","from","target","i","length","imagesPreviews","push","URL","createObjectURL","getBase64","then","data","encoded","replace","images","setState","formValidate","name","value","includes","toLowerCase","test","alert","slice","handleFormChange","handleAddressChange","address","file","Promise","resolve","reject","reader","FileReader","readAsDataURL","onload","result","onerror","error","onSubmitClick","Object","keys","submitSuccess","onResetClick","removeImage","imageIndex","splice","console","log","forceUpdate","bind","classes","previews","map","image","index","parseInt","height","card","media","deletePreview","icon","root","formGroup","title","price","line1","city","zipCode","description","ref","InputLabelRef","housingType","bedrooms","bathrooms","gridList","withTheme"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\n\nimport {\n  TextField, FormGroup, FormControl,\n  Paper, withStyles,Typography,\n} from '@material-ui/core';\nimport styles from './styles/new-listing';\nimport Button from '@material-ui/core/Button';\nimport { Redirect } from 'react-router-dom';\n//use axios for posting \nimport { createPosting } from '../../api/listings.actions';\nimport OutlinedInput from '@material-ui/core/OutlinedInput';\nimport Select from '@material-ui/core/Select';\nimport InputLabel from '@material-ui/core/InputLabel';\n\n\n\n//image preview stuff\nimport Card from '@material-ui/core/Card';\nimport CardMedia from '@material-ui/core/CardMedia';\nimport CardActions from '@material-ui/core/CardActions';\nimport CardContent from '@material-ui/core/CardContent';\nimport IconButton from '@material-ui/core/IconButton';\nimport DeleteForeverSharpIcon from '@material-ui/icons/DeleteForeverSharp';\nimport GridListTileBar from '@material-ui/core/GridListTileBar';\n\n\nimport GridList from '@material-ui/core/GridList';\nimport GridListTile from '@material-ui/core/GridListTile';\n\n\n\n// https://stackoverflow.com/questions/36280818/how-to-convert-file-to-base64-in-javascript\n\nclass NewListing extends Component{\n  \n  constructor(props){\n    super(props);\n    this.state = {\n      form: {\n        images: [],        \n        address: {}\n      },\n      imagesPreviews:[],\n      submitSuccess: false\n    }\n    this.addFile = this.addFile.bind(this);\n    this.onResetClick = this.onResetClick.bind(this);\n    this.onSubmitClick = this.onSubmitClick.bind(this);\n    this.handleFormChange = this.handleFormChange.bind(this);\n    this.handleAddressChange = this.handleAddressChange.bind(this);\n    this.formValidate = this.formValidate.bind(this);\n    this.removeImage = this.removeImage.bind(this);\n  }\n\n  addFile = event => {\n    let { form } = this.state;\n    let files = Array.from(event.target.files);\n\n  \n    for(let i = 0; i < files.length; i++){\n         this.state.imagesPreviews.push(URL.createObjectURL(files[i]));\n         this.getBase64(files[i])\n          .then((data) => {\n            let encoded = data.replace(/^data:(.*;base64,)?/, '');     \n            form.images.push(encoded);\n          });\n    }\n    this.setState({ form: form });\n  }; \n\n  formValidate=(name,value)=>{\n\n    if(['price','zipcode'].includes(name.toLowerCase())){\n      if(/[a-zA-Z]/.test(value)){\n        alert(\"must only contain digits\");\n        //undo the change\n        this.setState({ \n          form:{\n            ...this.state.form,\n            [name]: value.slice(0, -1)\n          } \n         });\n      }\n    }\n  }\n\n  handleFormChange = name => ({target: {value}}) => {   \n    this.setState({ \n      form:{\n        ...this.state.form,\n        [name]: value \n      } \n    });\n    this.formValidate(name,value);\n  };\n\n  handleAddressChange = name => ({target: {value}}) => {\n    this.formValidate(name,value);\n    const { form } = this.state\n    form.address[name] = value;\n    this.setState({ form: form });\n  };\n\n  getBase64 = (file) => {\n    return new Promise((resolve, reject) => {\n      const reader = new FileReader();\n      reader.readAsDataURL(file);\n      reader.onload = () => resolve(reader.result);\n      reader.onerror = error => reject(error);\n    });\n  }\n\n  onSubmitClick = () => {\n      const { form } = this.state;\n      if(Object.keys(form).length != 8){\n        alert('you must fill out all form fields');\n      }else{\n        createPosting(form, () => {\n\n          //if response is good then redirect-render new page\n          this.setState({ submitSuccess: true })\n        })\n      }\n  };\n\n  onResetClick = () => {\n    this.setState({\n      form: {\n        address: {},\n        images: []\n      },\n      imagesPreviews:[],\n    })\n  }\n\nremoveImage =(imageIndex) => {\n  \n  this.state.imagesPreviews.splice(imageIndex,1);\n  console.log(this.state.imagesPreviews)\n  this.forceUpdate();\n}\n\n  render(){\n\n  const { form, submitSuccess } = this.state;\n  const { classes } = this.props;\n  \n  let previews = this.state.imagesPreviews.map((image,imageIndex) => {\n    let index=parseInt(imageIndex);\n     return (\n        <GridListTile \n           key={\"preview image \" + index} \n           cols={1} \n           style={{ height: 'auto' }}\n        >\n           <Card className={classes.card}>         \n             <CardMedia\n               className={classes.media}\n               image= {image}\n               alt= {\"previewImage\" + index}  \n               title={\"Uploaded Image \" + index} \n             />              \n           </Card>\n\n           <GridListTileBar\n              actionIcon={\n                 <IconButton className={classes.deletePreview} onClick={() => this.removeImage(imageIndex)}>\n                    <DeleteForeverSharpIcon className={classes.icon} />\n                 </IconButton>\n              }\n           />\n        </GridListTile>\n\n     );\n   }); \n\n   if(submitSuccess){\n     return <Redirect to={'/profile/listings'} />\n   }\n   \n   return(\n    <Paper className={classes.root}>\n      <Typography \n       variant=\"h5\" \n       component=\"h3\"\n      >\n          Create New Listing\n      </Typography>\n     \n       <FormGroup className={classes.formGroup} >\n          <FormControl>\n           <TextField\n             label=\"Title\"\n             value={form.title}\n             onChange={this.handleFormChange('title')}             \n             margin=\"normal\"\n           />\n\n         </FormControl>\n\n         <FormControl>\n           <TextField\n             label=\"Price\"\n             value={form.price}\n             onChange={this.handleFormChange('price')}\n             margin=\"normal\"\n           />\n         </FormControl>\n\n         <FormControl>\n           <TextField\n             label=\"Address\"\n             value={form.address.line1}\n             onChange={this.handleAddressChange('line1')}\n             margin=\"normal\"\n           />\n         </FormControl>\n\n\n         <FormControl>\n           <TextField\n             label=\"City\"\n             value={form.address.city}\n             onChange={this.handleAddressChange('city')}\n             margin=\"normal\"\n           />\n         </FormControl>\n\n\n         <FormControl>\n           <TextField\n             label=\"State\"\n             value={form.address.state}\n             onChange={this.handleAddressChange('state')}\n             margin=\"normal\"\n           />\n         </FormControl>\n\n\n\n         <FormControl>\n           <TextField\n             label=\"Zip\"\n             value={form.address.zipCode}\n             onChange={this.handleAddressChange('zipCode')}\n             margin=\"normal\"\n           />\n         </FormControl>\n         <FormControl>\n           <TextField\n             multiline\n             rows=\"6\"\n             label=\"Description\"\n             value={form.description}\n             onChange={this.handleFormChange('description')}\n             margin=\"normal\"\n           />\n         </FormControl>\n\n\n          <br /> \n          <FormControl variant=\"outlined\">\n             <InputLabel\n               ref={ref => {\n                 this.InputLabelRef = ref;\n               }}\n             >\n               Housing Type\n             </InputLabel>\n             <Select\n               native\n               value={form.housingType}\n               onChange={this.handleFormChange('housingType')}\n               input={\n                 <OutlinedInput\n                   name=\"Housing Type\"              \n                   id=\"outlined-age-native-simple\"\n                   labelWidth={'Housing Type'.length}\n                 />\n               }\n             >\n               <option value=\"\" />\n               <option value={\"Apartment\"}>Apartment</option>\n               <option value={\"House\"}>House</option>\n               <option value={\"Room\"}>Room</option>\n               <option value={\"Studio\"}>Studio</option>\n               <option value={\"Townhome\"}>Townhome</option>\n\n             </Select>  \n          </FormControl>\n\n\n          <br />\n          <FormControl variant=\"outlined\">\n             <InputLabel\n               ref={ref => {\n                 this.InputLabelRef = ref;\n               }}\n               htmlFor=\"outlined-age-native-simple\"\n             >\n              Bed rooms\n             </InputLabel>\n             <Select\n               native\n               value={form.bedrooms}\n               onChange={this.handleFormChange('bedrooms')}\n               input={\n                 <OutlinedInput\n                   name=\"bedrooms\"              \n                   id=\"outlined-age-native-simple\"\n                   labelWidth={'bedrooms'.length}\n                 />\n               }\n             >\n               <option value=\"\" />\n               <option value={1}>1</option>\n               <option value={2}>2</option>\n               <option value={3}>3</option>\n             </Select>  \n          </FormControl>\n\n          <br />\n          <FormControl variant=\"outlined\">\n             <InputLabel\n               ref={ref => {\n                 this.InputLabelRef = ref;\n               }}\n               htmlFor=\"outlined-age-native-simple\"\n             >\n               Bathrooms\n             </InputLabel>\n             <Select\n               native\n               value={form.bathrooms}\n               onChange={this.handleFormChange('bathrooms')}\n               input={\n                 <OutlinedInput\n                   name=\"bathrooms\"              \n                   id=\"outlined-age-native-simple\"\n                   labelWidth={'bathrooms'.length}\n                 />\n               }\n             >\n               <option value=\"\" />\n               <option value={1}>1</option>\n               <option value={2}>2</option>\n               <option value={3}>3</option>\n             </Select>  \n          </FormControl>\n\n\n        \n         <FormControl>\n              <input \n                multiple\n                accept=\"image/png, image/jpeg\"\n                type = \"file\"\n                onChange={this.addFile}              \n              />  \n         </FormControl>\n\n         <GridList cellHeight={160} className={classes.gridList} cols={3}>\n         {previews}\n        </GridList>\n\n          \n         <div>\n           <Button \n              variant=\"contained\"\n              size=\"small\"\n              color=\"primary\"\n              type=\"reset\"\n              onClick={this.onResetClick}\n           >\n             RESET\n           </Button>\n           <Button\n              variant=\"contained\"\n              size=\"small\"\n              color=\"primary\"\n              onClick={this.onSubmitClick}\n            >\n             SUBMIT\n            </Button>\n         </div>\n       </FormGroup>              \n     </Paper>\n   );\n  }\n}\n\nexport default withStyles(styles, { withTheme: true })(NewListing);"]},"metadata":{},"sourceType":"module"}