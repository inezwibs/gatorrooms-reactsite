{"ast":null,"code":"import _defineProperty from \"/home/inez/Documents/csc648-sp19-team09/application/front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _objectSpread from \"/home/inez/Documents/csc648-sp19-team09/application/front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"/home/inez/Documents/csc648-sp19-team09/application/front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/inez/Documents/csc648-sp19-team09/application/front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/inez/Documents/csc648-sp19-team09/application/front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/inez/Documents/csc648-sp19-team09/application/front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"/home/inez/Documents/csc648-sp19-team09/application/front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"/home/inez/Documents/csc648-sp19-team09/application/front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/inez/Documents/csc648-sp19-team09/application/front-end/src/modules/listing/new-listing.js\";\nimport React, { Component } from 'react';\nimport { TextField, FormGroup, FormControl, Paper, withStyles } from '@material-ui/core';\nimport styles from './styles/new-listing';\nimport Button from '@material-ui/core/Button';\nimport { Redirect } from 'react-router-dom'; //use axios for posting \n\nimport { createPosting } from '../../api/listings.actions';\nimport OutlinedInput from '@material-ui/core/OutlinedInput';\nimport Select from '@material-ui/core/Select';\nimport InputLabel from '@material-ui/core/InputLabel'; // https://stackoverflow.com/questions/36280818/how-to-convert-file-to-base64-in-javascript\n\nvar NewListing =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(NewListing, _Component);\n\n  function NewListing(props) {\n    var _this;\n\n    _classCallCheck(this, NewListing);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(NewListing).call(this, props));\n\n    _this.addFile = function (event) {\n      var form = _this.state.form;\n      var files = Array.from(event.target.files);\n\n      for (var i = 0; i < files.length; i++) {\n        _this.getBase64(files[i]).then(function (data) {\n          var encoded = data.replace(/^data:(.*;base64,)?/, '');\n          console.log('Data: ', encoded);\n          form.images.push(encoded);\n        });\n      }\n\n      _this.setState({\n        form: form\n      });\n    };\n\n    _this.handleFormChange = function (name) {\n      return function (_ref) {\n        var value = _ref.target.value;\n\n        _this.setState({\n          form: _objectSpread({}, _this.state.form, _defineProperty({}, name, value))\n        });\n      };\n    };\n\n    _this.handleAddressChange = function (name) {\n      return function (_ref2) {\n        var value = _ref2.target.value;\n        var form = _this.state.form;\n        form.address[name] = value;\n\n        _this.setState({\n          form: form\n        });\n      };\n    };\n\n    _this.getBase64 = function (file) {\n      return new Promise(function (resolve, reject) {\n        var reader = new FileReader();\n        reader.readAsDataURL(file);\n\n        reader.onload = function () {\n          return resolve(reader.result);\n        };\n\n        reader.onerror = function (error) {\n          return reject(error);\n        };\n      });\n    };\n\n    _this.onSubmitClick = function () {\n      var form = _this.state.form;\n      createPosting(form, function () {\n        _this.setState({\n          submitSuccess: true\n        });\n      });\n    };\n\n    _this.onResetClick = function () {\n      _this.setState({\n        form: {\n          address: {},\n          images: []\n        }\n      });\n    };\n\n    _this.state = {\n      form: {\n        images: [],\n        address: {}\n      },\n      submitSuccess: false\n    };\n    _this.addFile = _this.addFile.bind(_assertThisInitialized(_this));\n    _this.onResetClick = _this.onResetClick.bind(_assertThisInitialized(_this));\n    _this.onSubmitClick = _this.onSubmitClick.bind(_assertThisInitialized(_this));\n    _this.handleFormChange = _this.handleFormChange.bind(_assertThisInitialized(_this));\n    _this.handleAddressChange = _this.handleAddressChange.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(NewListing, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$state = this.state,\n          form = _this$state.form,\n          submitSuccess = _this$state.submitSuccess; // var imagePreviews = form.images.map(function(image) {\n      //   return (            \n      //    <img src={URL.createObjectURL(image)} rounded height=\"200px\"/>\n      //   );\n      // });\n\n      var classes = this.props.classes;\n\n      if (submitSuccess) {\n        return React.createElement(Redirect, {\n          to: '/',\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 104\n          },\n          __self: this\n        });\n      }\n\n      return React.createElement(Paper, {\n        className: classes.root,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109\n        },\n        __self: this\n      }, React.createElement(\"form\", {\n        onSubmit: this.handleSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110\n        },\n        __self: this\n      }, React.createElement(FormGroup, {\n        className: classes.formGroup,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111\n        },\n        __self: this\n      }, React.createElement(FormControl, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112\n        },\n        __self: this\n      }, React.createElement(TextField, {\n        label: \"Title\",\n        value: form.title,\n        onChange: this.handleFormChange('title'),\n        margin: \"normal\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      })), React.createElement(FormControl, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120\n        },\n        __self: this\n      }, React.createElement(TextField, {\n        label: \"Price\",\n        value: form.price,\n        onChange: this.handleFormChange('price'),\n        margin: \"normal\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121\n        },\n        __self: this\n      })), React.createElement(FormControl, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129\n        },\n        __self: this\n      }, React.createElement(TextField, {\n        label: \"Address\",\n        value: form.address.line1,\n        onChange: this.handleAddressChange('line1'),\n        margin: \"normal\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130\n        },\n        __self: this\n      })), React.createElement(FormControl, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139\n        },\n        __self: this\n      }, React.createElement(TextField, {\n        label: \"City\",\n        value: form.address.city,\n        onChange: this.handleAddressChange('city'),\n        margin: \"normal\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140\n        },\n        __self: this\n      })), React.createElement(FormControl, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149\n        },\n        __self: this\n      }, React.createElement(TextField, {\n        label: \"State\",\n        value: form.address.state,\n        onChange: this.handleAddressChange('state'),\n        margin: \"normal\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150\n        },\n        __self: this\n      })), React.createElement(FormControl, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160\n        },\n        __self: this\n      }, React.createElement(TextField, {\n        label: \"Zip\",\n        value: form.address.zipCode,\n        onChange: this.handleAddressChange('zipCode'),\n        margin: \"normal\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161\n        },\n        __self: this\n      })), React.createElement(FormControl, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 168\n        },\n        __self: this\n      }, React.createElement(TextField, {\n        multiline: true,\n        rows: \"6\",\n        label: \"Description\",\n        value: form.description,\n        onChange: this.handleFormChange('description'),\n        margin: \"normal\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 169\n        },\n        __self: this\n      })), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 180\n        },\n        __self: this\n      }), React.createElement(FormControl, {\n        variant: \"outlined\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 181\n        },\n        __self: this\n      }, React.createElement(InputLabel, {\n        ref: function ref(_ref3) {\n          _this2.InputLabelRef = _ref3;\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 182\n        },\n        __self: this\n      }, \"Housing Type\"), React.createElement(Select, {\n        native: true,\n        value: form.housingType,\n        onChange: this.handleFormChange('housingType'),\n        input: React.createElement(OutlinedInput, {\n          name: \"Housing Type\",\n          id: \"outlined-age-native-simple\",\n          labelWidth: 'Housing Type'.length,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 194\n          },\n          __self: this\n        }),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 189\n        },\n        __self: this\n      }, React.createElement(\"option\", {\n        value: \"\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 201\n        },\n        __self: this\n      }), React.createElement(\"option\", {\n        value: \"Apartment\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 202\n        },\n        __self: this\n      }, \"Apartment\"), React.createElement(\"option\", {\n        value: \"House\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 203\n        },\n        __self: this\n      }, \"House\"), React.createElement(\"option\", {\n        value: \"Room\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 204\n        },\n        __self: this\n      }, \"Room\"), React.createElement(\"option\", {\n        value: \"Studio\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 205\n        },\n        __self: this\n      }, \"Studio\"), React.createElement(\"option\", {\n        value: \"Townhome\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 206\n        },\n        __self: this\n      }, \"Townhome\"))), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 212\n        },\n        __self: this\n      }), React.createElement(FormControl, {\n        variant: \"outlined\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 213\n        },\n        __self: this\n      }, React.createElement(InputLabel, {\n        ref: function ref(_ref4) {\n          _this2.InputLabelRef = _ref4;\n        },\n        htmlFor: \"outlined-age-native-simple\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 214\n        },\n        __self: this\n      }, \"Bed rooms\"), React.createElement(Select, {\n        native: true,\n        value: form.bedrooms,\n        onChange: this.handleFormChange('bedrooms'),\n        input: React.createElement(OutlinedInput, {\n          name: \"bedrooms\",\n          id: \"outlined-age-native-simple\",\n          labelWidth: 'bedrooms'.length,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 227\n          },\n          __self: this\n        }),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 222\n        },\n        __self: this\n      }, React.createElement(\"option\", {\n        value: \"\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 234\n        },\n        __self: this\n      }), React.createElement(\"option\", {\n        value: 1,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 235\n        },\n        __self: this\n      }, \"1\"), React.createElement(\"option\", {\n        value: 2,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 236\n        },\n        __self: this\n      }, \"2\"), React.createElement(\"option\", {\n        value: 3,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 237\n        },\n        __self: this\n      }, \"3\"))), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 241\n        },\n        __self: this\n      }), React.createElement(FormControl, {\n        variant: \"outlined\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 242\n        },\n        __self: this\n      }, React.createElement(InputLabel, {\n        ref: function ref(_ref5) {\n          _this2.InputLabelRef = _ref5;\n        },\n        htmlFor: \"outlined-age-native-simple\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 243\n        },\n        __self: this\n      }, \"Bathrooms\"), React.createElement(Select, {\n        native: true,\n        value: form.bathrooms,\n        onChange: this.handleFormChange('bathrooms'),\n        input: React.createElement(OutlinedInput, {\n          name: \"bathrooms\",\n          id: \"outlined-age-native-simple\",\n          labelWidth: 'bathrooms'.length,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 256\n          },\n          __self: this\n        }),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 251\n        },\n        __self: this\n      }, React.createElement(\"option\", {\n        value: \"\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 263\n        },\n        __self: this\n      }), React.createElement(\"option\", {\n        value: 1,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 264\n        },\n        __self: this\n      }, \"1\"), React.createElement(\"option\", {\n        value: 2,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 265\n        },\n        __self: this\n      }, \"2\"), React.createElement(\"option\", {\n        value: 3,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 266\n        },\n        __self: this\n      }, \"3\"))), React.createElement(FormControl, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 272\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        multiple: true,\n        accept: \"image/png, image/jpeg\",\n        type: \"file\",\n        onChange: this.addFile,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 273\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 283\n        },\n        __self: this\n      }, React.createElement(Button, {\n        variant: \"contained\",\n        size: \"small\",\n        color: \"primary\",\n        type: \"reset\",\n        onClick: this.onResetClick,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 284\n        },\n        __self: this\n      }, \"RESET\"), React.createElement(Button, {\n        variant: \"contained\",\n        size: \"small\",\n        color: \"primary\",\n        onClick: this.onSubmitClick,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 293\n        },\n        __self: this\n      }, \"SUBMIT\")))));\n    }\n  }]);\n\n  return NewListing;\n}(Component);\n\nexport default withStyles(styles, {\n  withTheme: true\n})(NewListing);","map":{"version":3,"sources":["/home/inez/Documents/csc648-sp19-team09/application/front-end/src/modules/listing/new-listing.js"],"names":["React","Component","TextField","FormGroup","FormControl","Paper","withStyles","styles","Button","Redirect","createPosting","OutlinedInput","Select","InputLabel","NewListing","props","addFile","event","form","state","files","Array","from","target","i","length","getBase64","then","data","encoded","replace","console","log","images","push","setState","handleFormChange","name","value","handleAddressChange","address","file","Promise","resolve","reject","reader","FileReader","readAsDataURL","onload","result","onerror","error","onSubmitClick","submitSuccess","onResetClick","bind","classes","root","handleSubmit","formGroup","title","price","line1","city","zipCode","description","ref","InputLabelRef","housingType","bedrooms","bathrooms","withTheme"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\n\nimport {\n  TextField, FormGroup, FormControl,\n  Paper, withStyles,\n} from '@material-ui/core';\nimport styles from './styles/new-listing';\nimport Button from '@material-ui/core/Button';\nimport { Redirect } from 'react-router-dom';\n//use axios for posting \nimport { createPosting } from '../../api/listings.actions';\nimport OutlinedInput from '@material-ui/core/OutlinedInput';\nimport Select from '@material-ui/core/Select';\nimport InputLabel from '@material-ui/core/InputLabel';\n\n// https://stackoverflow.com/questions/36280818/how-to-convert-file-to-base64-in-javascript\n\nclass NewListing extends Component{\n  \n  constructor(props){\n    super(props);\n    this.state = {\n      form: {\n        images: [],\n        address: {}\n      },\n      submitSuccess: false\n    }\n    this.addFile = this.addFile.bind(this);\n    this.onResetClick = this.onResetClick.bind(this);\n    this.onSubmitClick = this.onSubmitClick.bind(this);\n    this.handleFormChange = this.handleFormChange.bind(this);\n    this.handleAddressChange = this.handleAddressChange.bind(this);\n  }\n\n  addFile = event => {\n    let { form } = this.state;\n    let files = Array.from(event.target.files);\n    for(let i = 0; i < files.length; i++){\n         this.getBase64(files[i])\n          .then((data) => {\n            let encoded = data.replace(/^data:(.*;base64,)?/, '');\n            console.log('Data: ', encoded);\n            form.images.push(encoded);\n          });\n    }\n    this.setState({ form: form });\n  }; \n\n  handleFormChange = name => ({target: {value}}) => {\n    this.setState({ \n      form:{\n    \t  ...this.state.form,\n    \t  [name]: value \n      }\t\n    });\n  };\n\n  handleAddressChange = name => ({target: {value}}) => {\n    const { form } = this.state\n    form.address[name] = value;\n    this.setState({ form: form });\n  };\n\n  getBase64 = (file) => {\n    return new Promise((resolve, reject) => {\n      const reader = new FileReader();\n      reader.readAsDataURL(file);\n      reader.onload = () => resolve(reader.result);\n      reader.onerror = error => reject(error);\n    });\n  }\n\n  onSubmitClick = () => {\n      const { form } = this.state;\n      createPosting(form, () => {\n        this.setState({ submitSuccess: true })\n      })\n  };\n\n  onResetClick = () => {\n    this.setState({\n      form: {\n        address: {},\n        images: []\n      }\n    })\n  }\n\n\n  render(){\n\n  const { form, submitSuccess } = this.state;\n\n  // var imagePreviews = form.images.map(function(image) {\n  //   return (            \n  //    <img src={URL.createObjectURL(image)} rounded height=\"200px\"/>\n  //   );\n  // });\n\n   const { classes } = this.props; \n\n   if(submitSuccess){\n     return <Redirect to={'/'} />\n   }\n   \n\n   return(\n    <Paper className={classes.root}>\n     <form onSubmit={this.handleSubmit}>\n       <FormGroup className={classes.formGroup} >\n          <FormControl>\n           <TextField\n             label=\"Title\"\n             value={form.title}\n             onChange={this.handleFormChange('title')}\n             margin=\"normal\"\n           />\n         </FormControl>\n         <FormControl>\n           <TextField\n             label=\"Price\"\n             value={form.price}\n             onChange={this.handleFormChange('price')}\n             margin=\"normal\"\n           />\n         </FormControl>\n\n         <FormControl>\n           <TextField\n             label=\"Address\"\n             value={form.address.line1}\n             onChange={this.handleAddressChange('line1')}\n             margin=\"normal\"\n           />\n         </FormControl>\n\n\n         <FormControl>\n           <TextField\n             label=\"City\"\n             value={form.address.city}\n             onChange={this.handleAddressChange('city')}\n             margin=\"normal\"\n           />\n         </FormControl>\n\n\n         <FormControl>\n           <TextField\n             label=\"State\"\n             value={form.address.state}\n             onChange={this.handleAddressChange('state')}\n             margin=\"normal\"\n           />\n         </FormControl>\n\n\n\n         <FormControl>\n           <TextField\n             label=\"Zip\"\n             value={form.address.zipCode}\n             onChange={this.handleAddressChange('zipCode')}\n             margin=\"normal\"\n           />\n         </FormControl>\n         <FormControl>\n           <TextField\n             multiline\n             rows=\"6\"\n             label=\"Description\"\n             value={form.description}\n             onChange={this.handleFormChange('description')}\n             margin=\"normal\"\n           />\n         </FormControl>\n\n\n          <br /> \n          <FormControl variant=\"outlined\">\n             <InputLabel\n               ref={ref => {\n                 this.InputLabelRef = ref;\n               }}\n             >\n               Housing Type\n             </InputLabel>\n             <Select\n               native\n               value={form.housingType}\n               onChange={this.handleFormChange('housingType')}\n               input={\n                 <OutlinedInput\n                   name=\"Housing Type\"              \n                   id=\"outlined-age-native-simple\"\n                   labelWidth={'Housing Type'.length}\n                 />\n               }\n             >\n               <option value=\"\" />\n               <option value={\"Apartment\"}>Apartment</option>\n               <option value={\"House\"}>House</option>\n               <option value={\"Room\"}>Room</option>\n               <option value={\"Studio\"}>Studio</option>\n               <option value={\"Townhome\"}>Townhome</option>\n\n             </Select>  \n          </FormControl>\n\n\n          <br />\n          <FormControl variant=\"outlined\">\n             <InputLabel\n               ref={ref => {\n                 this.InputLabelRef = ref;\n               }}\n               htmlFor=\"outlined-age-native-simple\"\n             >\n              Bed rooms\n             </InputLabel>\n             <Select\n               native\n               value={form.bedrooms}\n               onChange={this.handleFormChange('bedrooms')}\n               input={\n                 <OutlinedInput\n                   name=\"bedrooms\"              \n                   id=\"outlined-age-native-simple\"\n                   labelWidth={'bedrooms'.length}\n                 />\n               }\n             >\n               <option value=\"\" />\n               <option value={1}>1</option>\n               <option value={2}>2</option>\n               <option value={3}>3</option>\n             </Select>  \n          </FormControl>\n\n          <br />\n          <FormControl variant=\"outlined\">\n             <InputLabel\n               ref={ref => {\n                 this.InputLabelRef = ref;\n               }}\n               htmlFor=\"outlined-age-native-simple\"\n             >\n               Bathrooms\n             </InputLabel>\n             <Select\n               native\n               value={form.bathrooms}\n               onChange={this.handleFormChange('bathrooms')}\n               input={\n                 <OutlinedInput\n                   name=\"bathrooms\"              \n                   id=\"outlined-age-native-simple\"\n                   labelWidth={'bathrooms'.length}\n                 />\n               }\n             >\n               <option value=\"\" />\n               <option value={1}>1</option>\n               <option value={2}>2</option>\n               <option value={3}>3</option>\n             </Select>  \n          </FormControl>\n\n\n        \n         <FormControl>\n              <input \n                multiple\n                accept=\"image/png, image/jpeg\"\n                type = \"file\"\n                onChange={this.addFile}              \n              />  \n         </FormControl>\n\n         {/* {imagePreviews} */}\n\n         <div>\n           <Button \n              variant=\"contained\"\n              size=\"small\"\n              color=\"primary\"\n              type=\"reset\"\n              onClick={this.onResetClick}\n           >\n             RESET\n           </Button>\n           <Button\n              variant=\"contained\"\n              size=\"small\"\n              color=\"primary\"\n              onClick={this.onSubmitClick}\n            >\n             SUBMIT\n            </Button>\n         </div>\n       </FormGroup>\n        </form>\n     </Paper>\n   );\n  }\n}\n       \n\nexport default withStyles(styles, { withTheme: true })(NewListing);\n\n\n\n\n\n\n\n\n\n\n  "]},"metadata":{},"sourceType":"module"}