{"ast":null,"code":"import _classCallCheck from \"/home/inez/Documents/csc648-sp19-team09/application/front-end/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/inez/Documents/csc648-sp19-team09/application/front-end/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/inez/Documents/csc648-sp19-team09/application/front-end/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/inez/Documents/csc648-sp19-team09/application/front-end/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/inez/Documents/csc648-sp19-team09/application/front-end/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/home/inez/Documents/csc648-sp19-team09/application/front-end/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/home/inez/Documents/csc648-sp19-team09/application/front-end/src/App.js\";\nimport React, { Component } from 'react'; //add google analytics\n\nimport ReactGA from 'react-ga'; //import PropTypes from 'prop-types';\n\nimport { withStyles } from '@material-ui/core/styles';\nimport { BrowserRouter, Route, Switch, Link } from 'react-router-dom';\nimport { AppBar, Toolbar, Typography, IconButton } from '@material-ui/core';\nimport { Info as InfoIcon, AccountCircle as AccountCircleIcon, MoreVert as MoreIcon } from '@material-ui/icons';\nimport AppBarMenu from './modules/_global/component/appbar-menu-nav';\nimport Maps from './modules/googlemaps/maps';\nimport AboutPage from './modules/about/about-page';\nimport HomePage from './modules/homepage/home-page';\nimport NewListing from './modules/listing/new-listing';\nimport Registration from './modules/registration/registration';\nimport LoginForm from './modules/login/login-form';\nimport ProfileDashboard from './modules/reguser/dashboard';\nimport ContactPage from './modules/contact/contact-page';\nimport { checkSession } from './api/user.actions'; //initialize google analytics\n\nReactGA.initialize('UA-138451224-1');\nReactGA.pageview('/homepage/home-page');\nReactGA.pageview('/about/about-page');\nReactGA.pageview('/listing/new-listing');\nReactGA.pageview('/registration/registration');\nReactGA.pageview('/login/login-form');\nReactGA.pageview('/reguser/dashboard');\nReactGA.pageview('/contact/contact-page');\nReactGA.pageview('/googlemaps/maps');\nReactGA.pageview(window.location.pathname + window.location.search);\nvar styles = {\n  root: {\n    flexGrow: 1\n  },\n  grow: {\n    flexGrow: 1\n  }\n};\nvar PROFILE_MENU_ACTIONS = [{\n  id: '/profile',\n  label: 'Profile'\n}, {\n  id: '/profile/listings',\n  label: 'My Listings'\n}, {\n  id: '/profile/listings/new',\n  label: 'New Listing'\n}, {\n  id: '/?logout=true',\n  label: 'Log Out'\n}];\nvar UNAUTHENTICATED_ACTIONS = [{\n  id: '/login',\n  label: 'Log In'\n}, {\n  id: '/register',\n  label: 'Register'\n}];\n\nvar App =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(App, _Component);\n\n  function App(props) {\n    var _this;\n\n    _classCallCheck(this, App);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(App).call(this, props));\n\n    _this._checkAuthentication = function () {\n      var session = sessionStorage.getItem('session');\n\n      if (session && JSON.parse(session).token) {\n        // validate session\n        var token = JSON.parse(session).token;\n        checkSession(token, function (_) {\n          return _this.setState({\n            isLoggedIn: true\n          });\n        }, function () {\n          return _this.setState({\n            isLoggedIn: false\n          });\n        });\n      } else {\n        _this.setState({\n          isLoggedIn: false\n        });\n      }\n    };\n\n    _this._toggleProfileMenu = function (event) {\n      var profileMenu = _this.state.profileMenu;\n      var state = {\n        profileMenu: !profileMenu\n      };\n\n      if (event) {\n        state['anchorEl'] = event.currentTarget;\n      }\n\n      _this.setState(state);\n    };\n\n    _this._toggleUnauthenticatedMenu = function (event) {\n      var unauthenticatedMenu = _this.state.unauthenticatedMenu;\n      var state = {\n        unauthenticatedMenu: !unauthenticatedMenu\n      };\n\n      if (event) {\n        state['anchorEl'] = event.currentTarget;\n      }\n\n      _this.setState(state);\n    };\n\n    _this.state = {\n      isLoggedIn: false,\n      profileMenu: false,\n      unauthenticatedMenu: false,\n      anchorEl: null\n    };\n    _this._toggleProfileMenu = _this._toggleProfileMenu.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this._checkAuthentication = _this._checkAuthentication.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(App, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this._checkAuthentication();\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps, prevState) {\n      if (prevState.isLoggedIn !== this.state.isLoggedIn) {\n        this._checkAuthentication();\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var classes = this.props.classes;\n      var _this$state = this.state,\n          isLoggedIn = _this$state.isLoggedIn,\n          profileMenu = _this$state.profileMenu,\n          unauthenticatedMenu = _this$state.unauthenticatedMenu,\n          anchorEl = _this$state.anchorEl;\n      return React.createElement(BrowserRouter, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: classes.root,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142\n        },\n        __self: this\n      }, React.createElement(AppBar, {\n        position: \"static\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143\n        },\n        __self: this\n      }, React.createElement(Toolbar, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144\n        },\n        __self: this\n      }, React.createElement(IconButton, {\n        className: classes.menuButton,\n        color: \"inherit\",\n        \"aria-label\": \"Menu\",\n        component: Link,\n        to: '/about',\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145\n        },\n        __self: this\n      }, React.createElement(InfoIcon, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152\n        },\n        __self: this\n      })), React.createElement(Typography, {\n        variant: \"caption\",\n        color: \"inherit\",\n        className: classes.grow,\n        component: Link,\n        to: '/',\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154\n        },\n        __self: this\n      }, \"SFSU - CSC 648 Team #9 Project\"), isLoggedIn ? React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159\n        },\n        __self: this\n      }, React.createElement(IconButton, {\n        \"aria-owns\": profileMenu ? 'menu-appbar' : undefined,\n        \"aria-haspopup\": \"true\",\n        onClick: this._toggleProfileMenu,\n        color: \"inherit\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160\n        },\n        __self: this\n      }, React.createElement(AccountCircleIcon, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166\n        },\n        __self: this\n      })), React.createElement(AppBarMenu, {\n        items: PROFILE_MENU_ACTIONS,\n        anchorEl: anchorEl,\n        open: profileMenu,\n        onClick: function onClick(id) {\n          if (id.indexOf('logout') > 0) {\n            sessionStorage.removeItem('session');\n            window.history.pushState({}, document.title, \"/\");\n            window.location.reload();\n          }\n        },\n        onClose: this._toggleProfileMenu,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 168\n        },\n        __self: this\n      })) : React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 182\n        },\n        __self: this\n      }, React.createElement(IconButton, {\n        \"aria-owns\": unauthenticatedMenu ? 'menu-appbar' : undefined,\n        \"aria-haspopup\": \"true\",\n        onClick: this._toggleUnauthenticatedMenu,\n        color: \"inherit\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 183\n        },\n        __self: this\n      }, React.createElement(MoreIcon, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 189\n        },\n        __self: this\n      })), React.createElement(AppBarMenu, {\n        items: UNAUTHENTICATED_ACTIONS,\n        anchorEl: anchorEl,\n        open: unauthenticatedMenu,\n        onClose: this._toggleUnauthenticatedMenu,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 191\n        },\n        __self: this\n      })))), React.createElement(\"div\", {\n        className: classes.content,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 203\n        },\n        __self: this\n      }, React.createElement(Switch, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 204\n        },\n        __self: this\n      }, React.createElement(Route, {\n        path: '/about',\n        component: AboutPage,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 205\n        },\n        __self: this\n      }), React.createElement(Route, {\n        path: '/new',\n        component: NewListing,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 206\n        },\n        __self: this\n      }), React.createElement(Route, {\n        path: '/maps',\n        component: Maps,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 207\n        },\n        __self: this\n      }), React.createElement(Route, {\n        path: '/login',\n        component: LoginForm,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 208\n        },\n        __self: this\n      }), React.createElement(Route, {\n        path: '/register',\n        component: Registration,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 209\n        },\n        __self: this\n      }), React.createElement(Route, {\n        path: '/profile',\n        component: ProfileDashboard,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 210\n        },\n        __self: this\n      }), React.createElement(Route, {\n        path: '/contact',\n        component: ContactPage,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 211\n        },\n        __self: this\n      }), React.createElement(Route, {\n        path: '/',\n        component: HomePage,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 212\n        },\n        __self: this\n      })))));\n    }\n  }]);\n\n  return App;\n}(Component);\n\nexport default withStyles(styles)(App);","map":{"version":3,"sources":["/home/inez/Documents/csc648-sp19-team09/application/front-end/src/App.js"],"names":["React","Component","ReactGA","withStyles","BrowserRouter","Route","Switch","Link","AppBar","Toolbar","Typography","IconButton","Info","InfoIcon","AccountCircle","AccountCircleIcon","MoreVert","MoreIcon","AppBarMenu","Maps","AboutPage","HomePage","NewListing","Registration","LoginForm","ProfileDashboard","ContactPage","checkSession","initialize","pageview","window","location","pathname","search","styles","root","flexGrow","grow","PROFILE_MENU_ACTIONS","id","label","UNAUTHENTICATED_ACTIONS","App","props","_checkAuthentication","session","sessionStorage","getItem","JSON","parse","token","_","setState","isLoggedIn","_toggleProfileMenu","event","profileMenu","state","currentTarget","_toggleUnauthenticatedMenu","unauthenticatedMenu","anchorEl","bind","prevProps","prevState","classes","menuButton","undefined","indexOf","removeItem","history","pushState","document","title","reload","content"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\n//add google analytics\nimport ReactGA from 'react-ga';\n//import PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\nimport { BrowserRouter, Route, Switch, Link } from 'react-router-dom';\n\nimport {\n  AppBar, Toolbar, Typography,\n  IconButton,\n} from '@material-ui/core';\n\nimport {\n  Info as InfoIcon,\n  AccountCircle as AccountCircleIcon,\n  MoreVert as MoreIcon\n} from '@material-ui/icons';\n\nimport AppBarMenu from './modules/_global/component/appbar-menu-nav';\nimport Maps from './modules/googlemaps/maps';\nimport AboutPage from './modules/about/about-page';\nimport HomePage from './modules/homepage/home-page';\nimport NewListing from './modules/listing/new-listing';\nimport Registration from './modules/registration/registration';\nimport LoginForm from './modules/login/login-form';\nimport ProfileDashboard from './modules/reguser/dashboard';\nimport ContactPage from './modules/contact/contact-page'; \nimport { checkSession } from './api/user.actions';\n//initialize google analytics\nReactGA.initialize('UA-138451224-1');\nReactGA.pageview('/homepage/home-page');\nReactGA.pageview('/about/about-page');\nReactGA.pageview('/listing/new-listing');\nReactGA.pageview('/registration/registration');\nReactGA.pageview('/login/login-form');\nReactGA.pageview('/reguser/dashboard');\nReactGA.pageview('/contact/contact-page');\nReactGA.pageview('/googlemaps/maps');\nReactGA.pageview(window.location.pathname + window.location.search);\n\nconst styles = {\n  root: {\n    flexGrow: 1,\n  },\n  grow: {\t\n    flexGrow: 1,\t\n  }\n};\n\nconst PROFILE_MENU_ACTIONS = [\n  {\n    id: '/profile',\n    label: 'Profile'\n  },\n  {\n    id: '/profile/listings',\n    label: 'My Listings'\n  },\n  {\n    id: '/profile/listings/new',\n    label: 'New Listing'\n  },\n  {\n    id: '/?logout=true',\n    label: 'Log Out'\n  }\n];\n\nconst UNAUTHENTICATED_ACTIONS = [\n  {\n    id: '/login',\n    label: 'Log In'\n  },\n  {\n    id: '/register',\n    label: 'Register'\n  }\n]\n\nclass App extends Component {\n\n  constructor(props){\n    super(props);\n    this.state = {\n      isLoggedIn: false,\n      profileMenu: false,\n      unauthenticatedMenu: false,\n      anchorEl: null\n    }\n    this._toggleProfileMenu = this._toggleProfileMenu.bind(this);\n    this._checkAuthentication = this._checkAuthentication.bind(this);\n  }\n\n  _checkAuthentication = () => {\n    const session = sessionStorage.getItem('session')\n\t\tif(session && JSON.parse(session).token){\n\t\t\t// validate session\n\t\t\tconst token = JSON.parse(session).token;\n      checkSession(token, \n        (_) => this.setState({ isLoggedIn: true }),\n        () => this.setState({ isLoggedIn: false }));\n\t\t}else{\n\t\t\tthis.setState({ isLoggedIn: false });\n\t\t}\n  }\n\n  componentDidMount(){\n    this._checkAuthentication();\n  }\n\n  componentDidUpdate(prevProps, prevState){\n    if(prevState.isLoggedIn !== this.state.isLoggedIn){\n      this._checkAuthentication();\n    }\n  }\n\n  _toggleProfileMenu = (event) => {\n    const { profileMenu } = this.state;\n    let state = { profileMenu: !profileMenu };\n    if(event){\n      state['anchorEl'] = event.currentTarget;\n    }\n    this.setState(state)\n  }\n\n  _toggleUnauthenticatedMenu = (event) => {\n    const { unauthenticatedMenu } = this.state;\n    let state = { unauthenticatedMenu: !unauthenticatedMenu };\n    if(event){\n      state['anchorEl'] = event.currentTarget;\n    }\n    this.setState(state)\n  }\n\n  render() {\n    const { classes } = this.props;\n    const { isLoggedIn, profileMenu,\n            unauthenticatedMenu, anchorEl } = this.state;\n    \n    return (\n      <BrowserRouter>\n        <div className={classes.root}>\n          <AppBar position=\"static\">\n            <Toolbar>\n              <IconButton\n                className={classes.menuButton}\n                color=\"inherit\"\n                aria-label=\"Menu\"\n                component={Link}\n                to={'/about'}\n              >\n                <InfoIcon />\n              </IconButton>\n              <Typography variant=\"caption\" color=\"inherit\" className={classes.grow} component={Link} to={'/'} >\n                SFSU - CSC 648 Team #9 Project\n              </Typography>\n                {\n                  isLoggedIn ?\n                  (<div>\n                    <IconButton\n                      aria-owns={profileMenu ? 'menu-appbar' : undefined}\n                      aria-haspopup=\"true\"\n                      onClick={this._toggleProfileMenu}\n                      color=\"inherit\"\n                    >\n                      <AccountCircleIcon />\n                    </IconButton>\n                    <AppBarMenu\n                      items={PROFILE_MENU_ACTIONS}\n                      anchorEl={anchorEl}\n                      open={profileMenu}\n                      onClick={(id) => {\n                        if(id.indexOf('logout') > 0){\n                          sessionStorage.removeItem('session');\n                          window.history.pushState({}, document.title, \"/\");\n                          window.location.reload();\n                        }\n                      }}\n                      onClose={this._toggleProfileMenu}\n                    />\n                  </div>):\n                  (<div>\n                    <IconButton\n                      aria-owns={unauthenticatedMenu ? 'menu-appbar' : undefined}\n                      aria-haspopup=\"true\"\n                      onClick={this._toggleUnauthenticatedMenu}\n                      color=\"inherit\"\n                    >\n                      <MoreIcon />\n                    </IconButton>\n                    <AppBarMenu\n                      items={UNAUTHENTICATED_ACTIONS}\n                      anchorEl={anchorEl}\n                      open={unauthenticatedMenu}\n                      onClose={this._toggleUnauthenticatedMenu}\n                    />\n                  </div>)\n                }\n\n            </Toolbar>\n          </AppBar>\n\n          <div className={classes.content} >\n            <Switch>\n              <Route path={'/about'} component={AboutPage} />\n              <Route path={'/new'} component={NewListing} />\n\t            <Route path={'/maps'} component={Maps} />\n              <Route path={'/login'} component={LoginForm} />\n              <Route path={'/register'} component={Registration} />\n              <Route path={'/profile'} component={ProfileDashboard} />\n              <Route path={'/contact'} component={ContactPage} />\n              <Route path={'/'} component={HomePage} />\n            </Switch>\n          </div>\n\n        </div>\n      </BrowserRouter>\n    );\n  }\n}\n\nexport default withStyles(styles)(App);\n"]},"metadata":{},"sourceType":"module"}