{"ast":null,"code":"import _classCallCheck from \"/home/inez/Documents/csc648-sp19-team09/application/front-end/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/inez/Documents/csc648-sp19-team09/application/front-end/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/inez/Documents/csc648-sp19-team09/application/front-end/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/inez/Documents/csc648-sp19-team09/application/front-end/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/inez/Documents/csc648-sp19-team09/application/front-end/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/home/inez/Documents/csc648-sp19-team09/application/front-end/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/home/inez/Documents/csc648-sp19-team09/application/front-end/src/modules/reguser/dashboard.js\";\nimport React, { Component } from 'react';\nimport styles from './styles/styles';\nimport { withStyles, Paper, Grid, Divider, Tabs, Tab } from '@material-ui/core';\nimport ProfileForm from './pages/profile-form';\nimport ProfileListings from './pages/profile-listings';\nimport AdminListings from './pages/admin-listings';\nimport Messages from '../contact/contact-page';\nimport NewListingForm from '../listing/new-listing';\nimport { Route, Switch, Redirect } from 'react-router-dom';\nimport { checkSession } from '../../api/user.actions';\n\nvar DashBoard =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(DashBoard, _Component);\n\n  function DashBoard(props) {\n    var _this;\n\n    _classCallCheck(this, DashBoard);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(DashBoard).call(this, props));\n\n    _this.handleBarNavigation = function (event, to) {\n      var prev = _this.state.to;\n\n      if (prev !== to) {\n        var prevLoc = window.location.pathname;\n        prevLoc = prevLoc.substr(1, prevLoc.length);\n\n        _this.setState({\n          from: prevLoc,\n          to: to\n        });\n      }\n    };\n\n    _this.state = {\n      from: '',\n      to: 'profile',\n      authenticationRequired: false,\n      admin: false\n    };\n    _this.handleBarNavigation = _this.handleBarNavigation.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(DashBoard, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      var session = sessionStorage.getItem('session');\n\n      if (session && JSON.parse(session).token) {\n        // validate session\n        var token = JSON.parse(session).token;\n        checkSession(token, function (_) {\n          _this2.setState({\n            admin: JSON.parse(session).admin\n          });\n        }, function () {\n          return _this2.setState({\n            authenticationRequired: true\n          });\n        });\n      } else {\n        this.setState({\n          authenticationRequired: true\n        });\n      }\n\n      this.setState({\n        to: window.location.pathname.substr(1)\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state = this.state,\n          from = _this$state.from,\n          to = _this$state.to,\n          authenticationRequired = _this$state.authenticationRequired,\n          admin = _this$state.admin;\n      var classes = this.props.classes;\n\n      if (authenticationRequired) {\n        return React.createElement(Redirect, {\n          to: '/login?authentication=true',\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 59\n          },\n          __self: this\n        });\n      }\n\n      return React.createElement(Paper, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 63\n        },\n        __self: this\n      }, React.createElement(Grid, {\n        justify: \"space-evenly\",\n        container: true,\n        spacing: 0,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64\n        },\n        __self: this\n      }, React.createElement(Tabs, {\n        value: to,\n        onChange: this.handleBarNavigation,\n        indicatorColor: \"primary\",\n        textColor: \"primary\",\n        centered: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69\n        },\n        __self: this\n      }, React.createElement(Tab, {\n        label: \"Profile\",\n        value: 'profile',\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76\n        },\n        __self: this\n      }), React.createElement(Tab, {\n        label: \"My Listings\",\n        value: 'profile/listings',\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77\n        },\n        __self: this\n      }), React.createElement(Tab, {\n        label: \"Messages\",\n        value: 'profile/messages',\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78\n        },\n        __self: this\n      }), admin && React.createElement(Tab, {\n        label: \"Admin\",\n        value: 'profile/admin',\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      }))), React.createElement(Divider, {\n        light: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: classes.content,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83\n        },\n        __self: this\n      }, React.createElement(Switch, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84\n        },\n        __self: this\n      }, React.createElement(Redirect, {\n        exact: true,\n        from: \"/\".concat(from),\n        to: \"/\".concat(to),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85\n        },\n        __self: this\n      }), React.createElement(Route, {\n        path: '/profile/listings/new',\n        component: NewListingForm,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86\n        },\n        __self: this\n      }), React.createElement(Route, {\n        path: '/profile/listings',\n        component: ProfileListings,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87\n        },\n        __self: this\n      }), React.createElement(Route, {\n        path: '/profile/messages',\n        component: Messages,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88\n        },\n        __self: this\n      }), admin && React.createElement(Route, {\n        path: '/profile/admin',\n        component: AdminListings,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89\n        },\n        __self: this\n      }), React.createElement(Route, {\n        path: '/profile',\n        component: ProfileForm,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90\n        },\n        __self: this\n      }))));\n    }\n  }]);\n\n  return DashBoard;\n}(Component);\n\nexport default withStyles(styles)(DashBoard);","map":{"version":3,"sources":["/home/inez/Documents/csc648-sp19-team09/application/front-end/src/modules/reguser/dashboard.js"],"names":["React","Component","styles","withStyles","Paper","Grid","Divider","Tabs","Tab","ProfileForm","ProfileListings","AdminListings","Messages","NewListingForm","Route","Switch","Redirect","checkSession","DashBoard","props","handleBarNavigation","event","to","prev","state","prevLoc","window","location","pathname","substr","length","setState","from","authenticationRequired","admin","bind","session","sessionStorage","getItem","JSON","parse","token","_","classes","content"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport styles from './styles/styles';\r\n\r\nimport {\r\n    withStyles, Paper, \r\n    Grid, Divider, Tabs, Tab\r\n} from '@material-ui/core'\r\n\r\nimport ProfileForm from './pages/profile-form';\r\nimport ProfileListings from './pages/profile-listings';\r\nimport AdminListings from './pages/admin-listings';\r\nimport Messages from '../contact/contact-page';\r\nimport NewListingForm from '../listing/new-listing';\r\nimport { Route, Switch, Redirect } from 'react-router-dom';\r\nimport { checkSession } from '../../api/user.actions';\r\n\r\nclass DashBoard extends Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tfrom: '',\r\n\t\t\tto: 'profile',\r\n\t\t\tauthenticationRequired: false,\r\n\t\t\tadmin: false\r\n\t\t}\r\n\t\tthis.handleBarNavigation = this.handleBarNavigation.bind(this);\r\n\t}\r\n\r\n\tcomponentDidMount(){\r\n\t\tconst session = sessionStorage.getItem('session')\r\n\t\tif(session && JSON.parse(session).token){\r\n\t\t\t// validate session\r\n\t\t\tconst token = JSON.parse(session).token;\r\n\t\t\tcheckSession(token, (_) => { this.setState({ admin: JSON.parse(session).admin }) }, () => this.setState({ authenticationRequired: true }));\r\n\t\t}else{\r\n\t\t\tthis.setState({ authenticationRequired: true });\r\n\t\t}\r\n\t\tthis.setState({ to: window.location.pathname.substr(1) });\r\n\t}\r\n\r\n\thandleBarNavigation = (event, to) => {\r\n\t\tlet prev = this.state.to;\r\n\t\tif (prev !== to) {\r\n\t\t\tlet prevLoc = window.location.pathname;\r\n\t\t\tprevLoc = prevLoc.substr(1, prevLoc.length);\r\n\t\t\tthis.setState({\r\n\t\t\t\tfrom: prevLoc,\r\n\t\t\t\tto: to\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n\trender() {\r\n\t\tconst { from, to, authenticationRequired, admin } = this.state;\r\n\t\tconst { classes } = this.props;\r\n\r\n\t\tif(authenticationRequired){\r\n\t\t\treturn <Redirect to={'/login?authentication=true'} />\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<Paper>\r\n\t\t\t\t<Grid\r\n\t\t\t\t\tjustify=\"space-evenly\"\r\n\t\t\t\t\tcontainer\r\n\t\t\t\t\tspacing={0}\r\n\t\t\t\t>\r\n\t\t\t\t\t<Tabs\r\n\t\t\t\t\t\tvalue={to}\r\n\t\t\t\t\t\tonChange={this.handleBarNavigation}\r\n\t\t\t\t\t\tindicatorColor=\"primary\"\r\n\t\t\t\t\t\ttextColor=\"primary\"\r\n\t\t\t\t\t\tcentered\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Tab label=\"Profile\" value={'profile'} />\r\n\t\t\t\t\t\t<Tab label=\"My Listings\" value={'profile/listings'} />\r\n\t\t\t\t\t\t<Tab label=\"Messages\" value={'profile/messages'} />\r\n\t\t\t\t\t\t{ admin && <Tab label=\"Admin\" value={'profile/admin'} />} \r\n\t\t\t\t\t</Tabs>\r\n\t\t\t\t</Grid>\r\n\t\t\t\t<Divider light />\r\n\t\t\t\t<div className={classes.content} >\r\n\t\t\t\t\t<Switch>\r\n\t\t\t\t\t\t<Redirect exact from={`/${from}`} to={`/${to}`} />\r\n\t\t\t\t\t\t<Route path={'/profile/listings/new'} component={NewListingForm} />\r\n\t\t\t\t\t\t<Route path={'/profile/listings'} component={ProfileListings} />\r\n\t\t\t\t\t\t<Route path={'/profile/messages'} component={Messages} />\r\n\t\t\t\t\t\t{ admin && <Route path={'/profile/admin'} component={AdminListings} />}\r\n\t\t\t\t\t\t<Route path={'/profile'} component={ProfileForm} />\r\n\t\t\t\t\t</Switch>\r\n\t\t\t\t</div>\r\n\t\t\t</Paper>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nexport default withStyles(styles)(DashBoard);\r\n"]},"metadata":{},"sourceType":"module"}